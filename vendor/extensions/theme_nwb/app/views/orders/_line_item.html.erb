<tr class="<%= cycle('', 'alt') %>">
  <td>
    <%- locals = {:item_form => item_form, :variant => variant, :line_item => line_item} -%>

    <%= item_form.hidden_field :variant_id %>
    <%= item_form.hidden_field :order_id %>
    <% if variant.images.length == 0 %>
      <% if variant.product.images.any? %>
        <%= image_tag variant.product.images.first.attachment.url(:mini) %>
      <% end %>
    <% else %>
      <%=  image_tag variant.images.first.attachment.url(:mini)   %>
    <% end %>
  </td>
  <td>
    <%= link_to variant.product.name,  product_path(variant.product) %> 
    <%= variant_options variant %>
  </td>
  <td>
    <%=  product_price(line_item) %>
  </td>
  <td>
    <%= item_form.text_field :quantity, :size => 3 %>
  </td>
  <td>
    <%= format_price(product_price(line_item, :format_as_currency => false) * line_item.quantity) unless line_item.quantity.nil? %>
  </td>
</tr>
